# Проект YaMDb

##### Проект YaMDb собирает отзывы пользователей на произведения.Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
####
##### Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Жуки» и вторая сюита Баха. Список категорий может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).
####
##### Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»).
####
##### Добавлять произведения, категории и жанры может только администратор.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.
######
##### Пользователи могут оставлять комментарии к отзывам.
Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.


## Команда разработчиков:
- [Александр Жданов (тимлид, в роли первого разработчика)](https://github.com/ZhdanovAM72)
- [Yury Zolnikov (в роли второго разработчика)](https://github.com/Kolbacyn)
- [Жанна Ивашова (в роли третьего разработчика)](https://github.com/ZhannaIvashova)


## Ресурсы API YaMDb:
- Ресурс **auth**: аутентификация.
- Ресурс **users**: пользователи.
- Ресурс **titles**: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
- Ресурс **categories**: категории (типы) произведений («Фильмы», «Книги», «Музыка»). - Одно произведение может быть привязано только к одной категории.
- Ресурс **genres**: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- Ресурс **reviews**: отзывы на произведения. Отзыв привязан к определённому произведению.
- Ресурс **comments**: комментарии к отзывам. Комментарий привязан к определённому отзыву.


## Применяемые в проекте технологии:

- Python v3.9.6
- Django v3.2
- Django Rest Framework v3.12.4
- PyJWT v2.1.10
- DRF SimpleJWT v5.2.2

## Пользовательские роли:
Аноним, Аутентифицированный пользователь, Модератор, Администратор, Суперюзер.

Реализована самостоятельная регистрация пользователей через эндпоинт /api/v1/auth/signup/ с последующим получением JWT-токена.

## Запуск проекта:

1. Cоздать и активировать виртуальное окружение:
```
Unix:
python3 -m venv venv source venv/bin/activate

Windows:
python -m venv venv source venv/Scripts/activate
```
2. Обновить PIP:
```
pip install --upgrade pip
```
3. Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```
4. Выполнить миграции (из дирректории с файлом manage.py):
```
python manage.py migrate
```
5. Запустить проект (из дирректории с файлом manage.py):
```
python manage.py runserver
```
6. Загрузить тестовые данные из csv файла:
```
python manage.py csv_importer
```
7. Документация проекта находится по этому эндпоинту (замените "your_localhost" на свой):
```
http://your_localhost/redoc/
```

## Примеры работы с API для всех пользователей
Для неавторизованных пользователей работа с API доступна в режиме чтения, что-либо изменить или создать не получится.

```r
Права доступа: Администратор
GET /api/v1/users/ - Получение списка всех пользователей

Права доступа: Доступно без токена.
GET /api/v1/categories/ - Получение списка всех категорий
GET /api/v1/genres/ - Получение списка всех жанров
GET /api/v1/titles/ - Получение списка всех произведений
GET /api/v1/titles/{title_id}/reviews/ - Получение списка всех отзывов
GET /api/v1/titles/{title_id}/reviews/{review_id}/comments/ - Получение списка всех комментариев к отзыву
```

## Регистрация нового пользователя
##### Получить код подтверждения на переданный email. Права доступа: Доступно без токена. Использовать имя 'me' в качестве username запрещено. Поля email и username должны быть уникальными.

#### Получение JWT-токена в обмен на username и confirmation code.
- Права доступа: Доступно без токена.
####
```http
  POST /v1/auth/signup/
```

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `username` | `string` | **Required**. Имя пользователя |
| `email` | `string` | **Required**. email пользователя |


#### Получение токена для доступа к API
- Права доступа: Доступно без токена.
```http
  POST /v1/auth/token/
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `username`      | `string` | **Required**. Имя пользователя |
| `confirmation_code`      | `string` | **Required**. Код подтверждения (полученый на email) |

#### Получить список всех категорий 
- Права доступа: Доступно без токена
```http
  GET /api/v1/categories/
```
```
{
  "count": 0,
  "next": "string",
  "previous": "string",
  "results": [
    {
      "name": "string",
      "slug": "ej0ymOkYK8SWjxb_de"
    }
  ]
}
```
#### Добавление категории:
- Доступ: Администратор.
```http
  POST /api/v1/categories/
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `name`      | `string` | **Required**. Имя категории |
| `slug`      | `string` | **Required**. Slug категории |

#### Удаление категории:
- Доступ: Администратор.
```http
  DELETE /api/v1/categories/{slug}
```

#### Получить список всех жанров. 
- Права доступа: Доступно без токена
```http
  GET /api/v1/genres/
```

```
{
  "count": 0,
  "next": "string",
  "previous": "string",
  "results": [
    {
      "name": "string",
      "slug": "LnB6kh9iOZfAL4DavTS3DqiV6GSHhjQwpkdjOdmMyo_CBYo-rc"
    }
  ]
}
```
#### Добавить жанр. 
- Права доступа: Администратор. Поле slug каждого жанра должно быть уникальным.
```http
  POST /api/v1/genres/
```
| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `name`      | `string` | **Required**. Имя жанра |
| `slug`      | `string` | **Required**. Slug жанра |

#### Удаление жанра:
- Доступ: Администратор.
```http
  DELETE /api/v1/genres/{slug}
```
### Произведения, к которым пишут отзывы (определённый фильм, книга или песенка).

#### Получить список всех произведений.
- Права доступа: Доступно без токена
```http
  GET /api/v1/titles/
```

```
{
  "count": 0,
  "next": "string",
  "previous": "string",
  "results": [
    {
      "id": 0,
      "name": "string",
      "year": 0,
      "rating": 0,
      "description": "string",
      "genre": [
        {
          "name": "string",
          "slug": "TZ1GR64y"
        }
      ],
      "category": {
        "name": "string",
        "slug": "aubCbSudp3nqlBm99c1QqukjVxboUxf5VQkpEq9dreivEaxygc"
      }
    }
  ]
}
```
#### Добавить новое произведение.
- Права доступа: Администратор. Нельзя добавлять произведения, которые еще не вышли (год выпуска не может быть больше текущего). При добавлении нового произведения требуется указать уже существующие категорию и жанр.
```http
  GET /api/v1/titles/
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `name`      | `string` | **Required**. Произведения |
| `year`      | `int` | **Required**. Год |
| `description`      | `string` | Описание |
| `genre`      | `string` | Жанр |
| `category`      | `string` |  Котегория |